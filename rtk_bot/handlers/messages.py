import os
from telebot import types
from services.weather import get_weather_full

menu_keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True)
buttons = [
    ["–ì—Ä–∞—Ñ–∏–∫ –º–∞—Å—Ç–µ—Ä–æ–≤", "–ì—Ä–∞—Ñ–∏–∫ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–≤"],
    ["–ü–æ–ª–µ–∑–Ω—ã–µ –Ω–æ–º–µ—Ä–∞", "–ü–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"],
    ["–ü—Ä–æ—à–∏–≤–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è", "–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã"],
]
for row in buttons:
    menu_keyboard.row(*row)

def register(bot):
    @bot.message_handler(func=lambda m: True)
    def respond(message):
        text = message.text
        if text == "–ü—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã":
            bot.send_message(message.chat.id, get_weather_full(), parse_mode="HTML")
        elif text == "–ü–æ–ª–µ–∑–Ω—ã–µ –Ω–æ–º–µ—Ä–∞":
            bot.send_message(message.chat.id, """
‚òéÔ∏è –ê–ö–¢–£–ê–õ–¨–ù–´–ï –ù–û–ú–ï–†–ê –î–ò–°–ü–ï–¢–ß–ï–†–û–í

–í–∞—Å–∏–ª—å–µ–≤–∞ –ï–∫–∞—Ç–µ—Ä–∏–Ω–∞:
+79212822470
+79916702832
8(81556)31008

–õ–æ–¥—ã–≥–∏–Ω–∞ –ì–∞–ª–∏–Ω–∞:
+79215162580 (–ª–∏—á–Ω—ã–π)
+79020356086
8(81551)72512

–ú–∞–Ω—ã—á –ú–∞—Ä–∏–Ω–∞:
+79916702834
+79210353530 (–ª–∏—á–Ω—ã–π)
8(81554)63499

–û–ª—å–≥–µ–π–∑–µ—Ä –¢–∞—Ç—å—è–Ω–∞:
+79533005533 (–ª–∏—á–Ω—ã–π)
8(81554)51556

–°–ª–µ–ø–æ–≤–∞ –î–∞—Ä—å—è:
+79118059964

–ö–æ–≤–∞–ª–µ–≤–∞ –ú–∏—Ä–∞–Ω–∞:
+79211552334

–°–∫—Ä–µ–±—Ü–æ–≤–∞ –Æ–ª–∏—è:
+79913839831
8(81554)51299
8(81554)51556

–°—Ç–µ–ø–∞–Ω–æ–≤–∞ –ü–æ–ª–∏–Ω–∞:
+79965617975 (–ª–∏—á–Ω—ã–π)

–§–µ–æ—Ñ–∞–Ω–æ–≤–∞ –ö—Å–µ–Ω–∏—è:
+79052943744 (–ª–∏—á–Ω—ã–π)

–Ø–∫–∏–º–æ–≤–∞ –ï–ª–µ–Ω–∞:
+7(991)6680982
8(81554)63499

üîÜ –ü–û –í–û–ü–†–û–°–ê–ú –û –¢–ê–†–ò–§–ê–•, –ü–†–û–î–ê–ñ–ê–•, –û–ë–û–†–£–î–û–í–ê–ù–ò–Æ, –°–¢–û–ò–ú–û–°–¢–ò :
–ò–≤–∫–∏–Ω–∞ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞
+79916702839
+79533075572

–ë—É–ª–∞—Ç–æ–≤–∞ –û–ª—å–≥–∞ +79913839859

–ú–∏—Ö–µ–ª—å—Å–æ–Ω –ê–ª–µ–∫—Å–∞–Ω–¥—Ä
+79113293009
+79215153009

‚ò£ –ü–û–õ–ï–ó–ù–´–ï –ù–û–ú–ï–†–ê ‚ò£Ô∏è
–°–≤–µ—Ç–µ–Ω–∫–æ –ù.–ê. +79212866836
–•–∞–∑–æ–≤–∞ –ù.–í. +79212730712
–î—É–±–∏–∫ –ê.–ï. +79113223779

–ì–§–°: <a href="tel:+78003013638">+78003013638</a>
(–¥–æ–±.625 –î–ï–ù–ò–° –ï–í–ì–ï–ù–¨–ï–í–ò–ß –ú–ò–®–ò–ù)

–ü–û–î–î–ï–†–ñ–ö–ê –ö–ò–¢: <a href="tel:+78001000107">+78001000107</a> (–ö–ú–£–¢)

–ü–û–î–î–ï–†–ñ–ö–ê –¶–ö–ò–ó: <a href="tel:+78003019927">+78003019927</a> (–ö–†–ò–ü–¢–û–®–õ–Æ–ó)

–ü–û–î–î–ï–†–ñ–ö–ê: <a href="tel:+78003010212">+7800-301-02-12</a>

–ü–û–î–î–ï–†–ñ–ö–ê –¢2: <a href="tel:+78003006611">+7800-300-6611</a> (–¥–æ–±.6611)
""")
        elif text == "–ì—Ä–∞—Ñ–∏–∫ –º–∞—Å—Ç–µ—Ä–æ–≤":
            for i in [1, 2]:
                path = f"masters{i}.jpg"
                if os.path.exists(path):
                    with open(path, 'rb') as photo:
                        bot.send_photo(message.chat.id, photo, caption=f"–ì—Ä–∞—Ñ–∏–∫ –º–∞—Å—Ç–µ—Ä–æ–≤ ({i}/2)")
        elif text in {"–ì—Ä–∞—Ñ–∏–∫ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–≤", "–ü–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"}:
            name = {"–ì—Ä–∞—Ñ–∏–∫ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–æ–≤": "dispatchers.jpg", "–ü–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è": "info.jpg"}[text]
            if os.path.exists(name):
                with open(name, 'rb') as photo:
                    bot.send_photo(message.chat.id, photo, caption=text)
        elif text == "–ü—Ä–æ—à–∏–≤–∫–∏ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è":
            from handlers.firmware import send_firmware
            send_firmware(bot, message)
        else:
            bot.send_message(message.chat.id, "‚ùì –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞.")
